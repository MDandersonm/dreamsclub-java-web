<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace ="xyz.dreams.mapper.MemberMapper">
	
	<!-- 오진서 -->  
	<insert id = "insertMember" >
		insert into member (
			MEMBER_ID,
			MEMBER_PW,
			MEMBER_EMAIL,
			MEMBER_PHONE,
			MEMBER_NAME,
			MEMBER_PCODE,
			MEMBER_ADDRESS1,
			MEMBER_ADDRESS2,
			MEMBER_STATUS,
			MEMBER_REG_DATE,
			MEMBER_LAST_LOGIN

			
		) values (
			#{memberId},
			#{memberPw},
			#{memberEmail},
			#{memberPhone},
			#{memberName},
			#{memberPcode},
			#{memberAddress1},
			#{memberAddress2},
		
			1,<!-- 일반적인 회원가입은 일반회원이므로 임의로 지정 -->
			SYSDATE, <!-- 지정한값이 아니라서 컴퓨터에서 자동으로 지정 -->
			#{memberLastLogin} <!-- 컨트롤러에서 설정해줘야함-->

		)
	</insert>

	<update id="updateMember">
		update member
		where member_id=#{memberid}
		
	</update>

	<delete id ="deleteMember">
		delete from Member where member_id=#{memberid}
	</delete>


<!--  수정  -->
	<select id="selectMember" resultType="MemberDTO">
		select member_id, member_pw, member_email, member_phone, member_name,
		 member_pcode, member_address1, member_address2, member_status, MEMBER_REG_DATE, MEMBER_LAST_LOGIN  
		from member where member_id = #{memberId}
	</select>

	<select id="selectMemberList" resultType="MemberDTO">
		select member_id, member_pw, member_email, member_phone, member_name,
		 member_pcode, member_address1, member_address2, member_status, MEMBER_REG_DATE
		  from member
		order by member_id
	</select>
	
	
	<!-- 강민경: 로그인 시 사용  -->
	<select id="selectLoginCheck" resultType="MemberDTO">
	<!-- where절에서 id, pw값을 받고 결과 값을 resultType="~~"으로 전달  -->
	select MEMBER_ID, MEMBER_PW, MEMBER_NAME, MEMBER_STATUS, MEMBER_EMAIL, MEMBER_PHONE, MEMBER_ADDRESS1, MEMBER_ADDRESS2
	 from member where MEMBER_ID=#{memberId} 
	</select>
	<!-- 강민경: 아이디 찾기 시 사용  -->
	<select id="selectSearch" resultType="string">
	<!-- where절에서 id, pw값을 받고 결과 값을 resultType="~~"으로 전달  -->
	select MEMBER_ID from member where MEMBER_NAME=#{memberName} and MEMBER_EMAIL=#{memberEmail}
	</select>
	
	<!-- 강민경: 비밀번호 찾기 set 맞는 사람만-->
	<update id="searchPw">
	 update member set MEMBER_PW = #{memberPw} where MEMBER_NAME=#{memberName} and MEMBER_EMAIL=#{memberEmail} and MEMBER_ID=#{memberId}
	  
	</update>
	 
	
	
</mapper>